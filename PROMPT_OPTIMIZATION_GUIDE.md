# 提示词优化技巧完整指南

基于 Weibo-Pro 项目的代码艺术家哲学与多角色提示词系统的深度学习。

---

## 核心哲学

### 存在即合理（Existence Implies Necessity）
- 每一行代码、每一句提示词都有不可替代的目的
- 如果能删掉，就应该删掉
- 冗余是最大的敌人

### 优雅即简约（Elegance is Simplicity）
- 好的提示词自我解释，不需要说明书
- 用结构代替冗余，用示例代替解释
- 删除任何一个词都会损失信息

### 性能即艺术（Performance is Art）
- 优化既要快也要美
- 不牺牲可读性来追求简洁
- 找到效率和优雅的平衡点

### 错误处理如为人处世（Error Handling as Philosophy）
- 明确的边界和禁区
- 优雅地说"不"，比盲目说"好"重要
- 承认限制是力量的来源

---

## 四层提示词架构

### 第 1 层：角色定位（Role）
**必须有，是整个提示词的基石**

```
你是 [具体身份]，[核心特征]。
```

❌ 错误：
```
你是一个有帮助的 AI 助手
```

✓ 正确：
```
你是代码艺术家，精通编程和诗学。
```

**检查清单：**
- 身份具体且可信吗？（避免过度承诺）
- 特征能区别其他角色吗？
- 第一句就能说清楚吗？

### 第 2 层：核心能力（Capabilities）
**列出 3-5 个最关键的能力**

```
核心能力：
- 能力 1：[具体说明为什么]
- 能力 2：[具体说明为什么]
```

❌ 错误：
```
能做很多事情：分析代码、写代码、优化代码等等...
```

✓ 正确：
```
核心能力：
- 识别代码冗余：通过结构化分析找到精简机会
- 重构设计：用最小架构实现最大价值
- 审美评估：评判代码的优雅程度
```

**关键原则：**
- 不是"能做什么"，而是"擅长什么"
- 每个能力都要附带理由
- 宁可遗漏也不要夸大

### 第 3 层：工作原则（Principles）
**指导所有行为的根本准则，3-4 个**

```
工作原则：
- 原则 1：[描述 + 为什么]
- 原则 2：[描述 + 为什么]
```

✓ 例子：
```
工作原则：
- 数据优先：每个判断都需要数据支撑，避免凭感觉
- 具象化：用具体数据代替模糊表述（"很多" → "60%"）
- 预判性：识别趋势，预测风险，提前示警
```

**为什么重要：**
- 原则 > 规则（规则是具体的，容易过时；原则是通用的，永远有效）
- 原则自动生成行为（不需要列举 100 条具体规则）
- 原则体现人格（让角色更真实）

### 第 4 层：边界与禁区（Boundaries）
**明确说"不"，比说"好"更重要**

```
边界与禁区：
- 不做：[具体禁区 + 原因]
- 仅基于：[限制条件说明]
```

✓ 例子：
```
边界与禁区：
- 不进行实时采集：仅使用已有数据库数据
- 不做通用知识：只存储原创、项目级别的信息
- 不跨越职责：遵循单一真相源原则
```

**为什么关键：**
- 边界清晰，模型才会遵守
- 诚实的限制比虚假的承诺更有信任
- 避免模型的幻觉和越权

---

## 诊断与优化的 9 大技巧

### 技巧 1：精简冗余词
**检查清单**
- "在实际上" → "实际上"
- "各种不同的" → "不同的"
- "必须要" → "要"
- "非常…非常…" → "…"

❌ 前：
```
系统会非常谨慎地、非常小心地进行数据处理...
```

✓ 后：
```
系统谨慎处理数据...
```

### 技巧 2：将段落改成列表
**列表的优势**
- 扫一眼就懂（不需要逐词阅读）
- 便于查找（可以快速定位）
- 易于维护（容易修改添加）

❌ 前：
```
系统支持多种输出格式，包括 JSON、CSV、Excel 等，
还可以进行数据过滤、排序和分页。
```

✓ 后：
```
支持：
- 输出格式：JSON、CSV、Excel
- 数据操作：过滤、排序、分页
```

### 技巧 3：用示例代替解释
**示例的力量**
- 一个例子胜过千言万语
- 消除歧义
- 降低理解成本

❌ 前：
```
提高清晰度，通过使用更具体的语言表达。
```

✓ 后：
```
提高清晰度：
- 不说"声量很大" → 说"10万+微博，转发评论比1:5"
- 不说"负面多" → 说"负面占比65%，环比↑15%"
```

### 技巧 4：明确术语定义
**一致性很关键**

❌ 前：
```
用户可以通过系统……人类用户能够……客户需要……
```

✓ 后：
```
用户可以通过系统……用户能够……用户需要……
```

**最佳实践：**
- 在第一次出现时定义术语
- 全文保持一致使用
- 避免同义词混用（最多用两个变体）

### 技巧 5：提取隐含意图
**三层问题体系**

1. **表面需求**
   - "我需要一个代码审查工具"

2. **真实问题**（问"为什么"）
   - "代码质量不稳定，难以维护"

3. **根本目标**（问"解决什么"）
   - "建立可持续的代码质量标准"

**应用：** 设计提示词时，瞄准第 3 层，第 1 层自动满足

### 技巧 6：分层信息密度
**重要信息置前，细节放后**

```
核心（10 秒内理解）
  ↓
支撑信息（1 分钟内掌握）
  ↓
细节示例（需要时查看）
```

❌ 前：
```
系统包含 15 个不同的功能，其中涉及数据采集、处理、
分析、可视化等多个环节，每个环节都有 2-3 个子功能，
同时系统还支持……
```

✓ 后：
```
核心功能：采集 → 处理 → 分析 → 可视化

详细说明：
- 采集：微博API、爬虫（2 种方式）
- 处理：清洗、分词、去重（3 个环节）
...
```

### 技巧 7：用格式代替词语
**结构本身就是信息**

❌ 前：
```
能做的有：A、B、C、D...，但不能做：X、Y、Z...，
要注意的是……
```

✓ 后：
```
能力：A, B, C, D
禁区：X, Y, Z
注意：[重点列出]
```

### 技巧 8：编号原则而非规则
**原则 > 规则**

❌ 前：
```
规则 1：检查输入...
规则 2：验证格式...
规则 3：处理异常...
...规则 47...
```

✓ 后：
```
核心原则：
1. 防御性设计：先假设输入有问题，再优化流程
2. 快速失败：早发现早处理，避免数据污染
3. 清晰报错：用户能理解问题和解决方案
```

### 技巧 9：单一真相源原则
**每个概念只定义一次，其他地方引用**

❌ 前：
```
ISSUE 框架定义在这里...
稍后在另一个地方又解释一遍 ISSUE 框架...
在第三个地方再提一遍...
```

✓ 后：
```
核心框架：ISSUE（5 步流程）

ISSUE 框架详解：[一处定义]

在应用时：参考 ISSUE 框架的第 X 步...
```

---

## 常见反模式与修复

| 反模式 | 表现 | 危害 | 修复 |
|--------|------|------|------|
| **过度承诺** | "能做任何事" | 无法兑现，降低信任 | 列出具体能做的 3-5 件 |
| **虚假谦逊** | "可能不完美但尽力" | 显得不自信，容易被利用 | "优势：X，限制：Y" |
| **规则堆砌** | 50+ 条具体规则 | 难以维护，容易遗漏 | 提炼为 3-4 个原则 |
| **隐含假设** | "你应该知道背景..." | 用户困惑，容易误解 | 完整说明背景和上下文 |
| **平铺结构** | 所有信息同一层级 | 难以抓住重点 | 分层：核心→支撑→细节 |
| **假装个性** | 不必要的 emoji、感叹号 | 显得不专业 | 用真实能力体现个性 |
| **过度优化** | 为简短而牺牲清晰 | 用户困惑 | "简洁 + 清晰"优先 |
| **一成不变** | 优化后就不调整 | 需求变化时失效 | 定期验证和迭代 |

---

## 优化工作流（5 步）

### Step 1：诊断问题（5 分钟）
**识别症状**
- [ ] 模糊症状：用词不精准、边界不清
- [ ] 冗余症状：重复表述、修饰堆积
- [ ] 结构症状：平铺堆积、逻辑混乱
- [ ] 意图症状：目标不清、角色定位模糊

### Step 2：分析根因（10 分钟）
**回答这 4 个问题**
1. 这个模糊是需求本身模糊，还是表述模糊？
2. 重复的部分能合并吗？
3. 结构能更清晰吗？
4. 用户真正想要什么？（隐含意图）

### Step 3：精炼优化（20 分钟）
**按顺序执行**
1. 清理冗余词和句子
2. 将段落改成列表
3. 添加明确的章节标题
4. 用具体例子替换抽象表述
5. 分层整理信息密度

### Step 4：验证质量（10 分钟）
**问这 5 个问题**
- [ ] 读这个，能立即明白角色是谁吗？
- [ ] 能列出 3 个具体能力吗？
- [ ] 知道什么时候不该用这个吗？
- [ ] 比原版少了什么重要信息吗？
- [ ] 读起来像人话吗？

### Step 5：A/B 测试（持续）
**建立 Baseline**
```
指标选择（3-5 个）：
- 输出质量：符合期望程度 (1-10)
- 响应稳定性：不同输入一致性 (%)
- 执行效率：完成时间 (秒)
```

**对比测试**
- 旧版本：原始提示词
- 新版本：优化后提示词
- 样本量：5-10 次测试

---

## 提示词结构的最小化模板

```markdown
## 角色定位
你是 [身份]，[核心特征]。

## 核心能力
- 能力 1：[说明]
- 能力 2：[说明]
- 能力 3：[说明]

## 工作原则
- 原则 1：[描述 + 为什么]
- 原则 2：[描述 + 为什么]

## 边界与禁区
- 不做：[具体禁区]
- 限制：[技术限制]

## 可选：具体例子
[仅在规则无法清晰表达时添加]
```

**为什么这个结构最优？**
- **最小化**：删掉任何一部分都会丢信息
- **可扩展**：容易添加新能力或原则
- **可维护**：结构清晰，改动不会破坏整体
- **易理解**：用户快速找到需要的信息

---

## 项目中的最佳实践示例

### 例子 1：女娲角色（Nuwa）
**学到的技巧：**
- 用哲学性的概念作为内核（第一性原理、奥卡姆剃刀）
- 分离"思维层"和"执行层"（思想 ≠ 行动）
- ISSUE 框架作为单一真相源（定义一次，重复引用）

### 例子 2：舆情分析师（Sentiment Analyzer）
**学到的技巧：**
- 用"矛盾论"体现专业深度
- 具象化表述（"声量大" → "10万+微博"）
- 事件生命周期模型（阶段化思维）

### 例子 3：数据验证者（Data Validator）
**学到的技巧：**
- 清晰的错误分类
- 具体的验证规则
- 可操作的修复建议

---

## 快速参考：提示词优化检查清单

### 发布前必检（15 项）

**清晰度（5 项）**
- [ ] 角色定位在第一句？
- [ ] 能快速找出核心能力？
- [ ] 术语使用一致？
- [ ] 每句都能自我解释？
- [ ] 删除任何一句都丢信息？

**结构（3 项）**
- [ ] 分层清晰？（核心→支撑→细节）
- [ ] 能 30 秒总结核心？
- [ ] 导航线索充足？

**完整性（4 项）**
- [ ] 角色、能力、原则、边界都有？
- [ ] 包含必要上下文？
- [ ] 例子真实相关？
- [ ] 没有遗漏关键信息？

**质量（3 项）**
- [ ] 朗读感觉自然？
- [ ] 没有冗余？
- [ ] 长度合理？

**通过所有检查 → 可以发布**

---

## 工具与资源

### 建议的评估工具

1. **冗余检查**
   - 用 Diff 工具对比优化前后
   - 统计字数减少百分比（目标：20-30%）

2. **清晰度测试**
   - 让不相关的人读一遍，问他们理解了什么
   - 如果理解和预期不符，结构需要改进

3. **一致性检查**
   - 搜索同义词（如"用户""人类""客户"）
   - 确保只用一个术语

4. **结构分析**
   - 提取所有标题，组织成目录
   - 看是否形成逻辑树

### 持续改进

```
优化完成 → 监控 1-2 周
  ↓
收集使用反馈
  ↓
定性问题明显吗？
  ├─ 是 → 调整，重新测试
  └─ 否 → 保留，应用到其他角色
```

---

## 结语：从工程师到艺术家

优化提示词的最终目标不是"更短"或"更快"，而是**让意图更清晰，让执行更优雅**。

如果一句话被删掉后，整个提示词变得更难理解，那说明这句话很重要——保留它。

如果一句话被删掉后，整个提示词变得更清晰，那说明这句话是噪音——删掉它。

在这个删与留的过程中，我们打磨出的不仅仅是更好的提示词，还有对问题本质更深刻的理解。

**这就是代码艺术的境界。**

---

*基于 Weibo-Pro 项目的深度学习总结*
*遵循：存在即合理，优雅即简约，性能即艺术*
