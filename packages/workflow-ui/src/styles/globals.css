@import 'tailwindcss';
@import '@xyflow/react/dist/style.css';

@source "../";

@theme {
  /* 语义化颜色系统 - 支持主题切换 */
  --color-background: light-dark(#ffffff, #000000);
  --color-foreground: light-dark(#0f172a, #e2e8f0);
  --color-muted: light-dark(#64748b, #94a3b8);
  --color-border: light-dark(#e2e8f0, #334155);

  /* 工作流特定颜色 */
  --color-primary: light-dark(#4f46e5, #818cf8);
  --color-primary-light: light-dark(#818cf8, #a5b4fc);
  --color-secondary: light-dark(#9333ea, #c084fc);
  --color-accent: light-dark(#2563eb, #60a5fa);
  --color-success: light-dark(#059669, #34d399);
  --color-warning: light-dark(#d97706, #fbbf24);
  --color-error: light-dark(#dc2626, #f87171);

  /* 节点颜色 */
  --color-node-bg: light-dark(#f8fafc, #1e293b);
  --color-node-bg-hover: light-dark(#f1f5f9, #334155);
  --color-node-border: light-dark(#cbd5e1, #334155);
  --color-node-selected: light-dark(#eef2ff, #1e1b4b);

  /* 边颜色 */
  --color-edge-data: light-dark(#94a3b8, #64748b);
  --color-edge-control: light-dark(#9333ea, #a855f7);

  /* 面板颜色 */
  --color-panel-bg: light-dark(#ffffff, #0f172a);
  --color-panel-border: light-dark(#e2e8f0, #1e293b);
  --color-panel-header: light-dark(#f8fafc, #1e293b);
  --color-panel-divider: light-dark(#e2e8f0, #334155);

  /* 阴影 - 根据主题调整透明度 */
  --shadow-node: light-dark(
    0 4px 12px rgba(0, 0, 0, 0.1),
    0 4px 12px rgba(0, 0, 0, 0.4)
  );
  --shadow-node-hover: light-dark(
    0 8px 24px rgba(79, 70, 229, 0.15),
    0 8px 24px rgba(129, 140, 248, 0.25)
  );
  --shadow-node-selected: light-dark(
    0 0 0 2px theme(colors.primary), 0 8px 24px rgba(79, 70, 229, 0.2),
    0 0 0 2px theme(colors.primary), 0 8px 24px rgba(129, 140, 248, 0.35)
  );
  --shadow-panel: light-dark(
    0 0 30px rgba(0, 0, 0, 0.08),
    0 0 30px rgba(0, 0, 0, 0.5)
  );

  /* 圆角 */
  --radius-lg: 0.75rem;
  --radius-md: 0.5rem;

  /* 过渡 */
  --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-normal: 200ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

* {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  @apply font-sans bg-background text-foreground;
}

.react-flow__node {
  @apply min-w-[120px] max-w-[320px] box-border;
  width: fit-content !important;
  transition: none !important;
  z-index: 2;
}

.react-flow__node:not(.dragging) {
  transition: box-shadow var(--transition-fast), background-color var(--transition-fast) !important;
}

.react-flow__node.dragging {
  z-index: 5;
}

.react-flow__edge {
  z-index: 1;
}

.react-flow__edge.selected,
.react-flow__edge:hover {
  z-index: 4;
}

.react-flow__edge.selected path {
  stroke: var(--color-primary);
}

.react-flow__edge:hover path {
  stroke: var(--color-primary);
}

.react-flow__edges {
  z-index: 9;
}

.react-flow__connection-line {
  z-index: 6;
}
