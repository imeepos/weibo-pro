{
  "packages": [
    {
      "name": "@sker/core",
      "path": "/home/ubuntu/worktrees/demo/sker/packages/core",
      "description": "依赖注入系统核心库，提供灵活的类型安全的DI容器实现。支持多层级注入器（Root、Platform、Application、Feature）和自动解析。",
      "mainExports": [
        "EnvironmentInjector",
        "Injector",
        "Injectable",
        "Inject",
        "createInjector",
        "createRootInjector",
        "createPlatformInjector",
        "createApplicationInjector",
        "createFeatureInjector"
      ],
      "keyFeatures": [
        "支持 Root/Platform/Application/Feature 四层级注入器",
        "自动解析 @Injectable({ providedIn: 'root' }) 的服务",
        "支持工厂函数、值、类、现有provider等多种注入方式",
        "内置循环依赖检测和参数装饰器（@Optional, @Self, @SkipSelf, @Host）"
      ],
      "dependencies": [
        "reflect-metadata"
      ]
    },
    {
      "name": "@sker/workflow",
      "path": "/home/ubuntu/worktrees/demo/sker/packages/workflow",
      "description": "工作流引擎核心，提供AST定义、图结构解析、访问者模式执行、调度和数据流管理。",
      "mainExports": [
        "Ast",
        "WorkflowGraphAst",
        "ArrayIteratorAst",
        "createWorkflowGraphAst",
        "execute",
        "executeAst",
        "WorkflowExecutorVisitor",
        "VisitorExecutor",
        "WorkflowScheduler",
        "DependencyAnalyzer",
        "DataFlowManager"
      ],
      "keyFeatures": [
        "基于访问者模式的工作流执行引擎",
        "完整的AST节点和边的定义（支持数据边和控制边）",
        "依赖分析器支持DAG拓扑排序和并行执行",
        "状态管理和数据流传递"
      ],
      "dependencies": [
        "@sker/core"
      ]
    },
    {
      "name": "@sker/workflow-ast",
      "path": "/home/ubuntu/worktrees/demo/sker/packages/workflow-ast",
      "description": "工作流节点的抽象语法树定义，包含微博爬取、内容收集、NLP分析、事件创建等具体工作流节点。",
      "mainExports": [
        "WeiboAjaxFeedHotTimelineAst",
        "WeiboAjaxFriendshipsAst",
        "WeiboAjaxProfileInfoAst",
        "PostContextCollectorAst",
        "PostNLPAnalyzerAst",
        "EventAutoCreatorAst",
        "WeiboKeywordSearchAst"
      ],
      "keyFeatures": [
        "定义特定域的工作流节点类（微博、NLP、事件等）",
        "每个节点继承 Ast 并使用 @Node、@Input、@Output 装饰器",
        "支持与 @sker/nlp、@sker/workflow-run 集成的节点定义",
        "可序列化/反序列化为JSON格式"
      ],
      "dependencies": [
        "@sker/core",
        "@sker/workflow",
        "@sker/nlp"
      ]
    },
    {
      "name": "@sker/workflow-run",
      "path": "/home/ubuntu/worktrees/demo/sker/packages/workflow-run",
      "description": "工作流节点的后端运行时实现，包含微博API访问、内容收集、NLP分析、事件自动创建的具体访问者实现。",
      "mainExports": [
        "WeiboAjaxFeedHotTimelineAstVisitor",
        "WeiboAjaxFriendshipsAstVisitor",
        "WeiboAjaxStatusesShowAstVisitor",
        "PostContextCollectorVisitor",
        "PostNLPAnalyzerVisitor",
        "EventAutoCreatorVisitor",
        "startPostNLPConsumer"
      ],
      "keyFeatures": [
        "实现工作流AST节点的访问者（Visitor）模式执行",
        "使用 cheerio 进行HTML解析，playwright 进行浏览器自动化",
        "集成后端services进行数据持久化和NLP分析",
        "支持消息队列消费者用于异步处理"
      ],
      "dependencies": [
        "@sker/core",
        "@sker/workflow",
        "@sker/workflow-ast",
        "@sker/entities",
        "@sker/redis",
        "@sker/mq",
        "@sker/nlp",
        "cheerio",
        "playwright"
      ]
    },
    {
      "name": "@sker/workflow-browser",
      "path": "/home/ubuntu/worktrees/demo/sker/packages/workflow-browser",
      "description": "浏览器运行时，为工作流提供前端执行环境（当前为占位符）。",
      "mainExports": [],
      "keyFeatures": [
        "提供浏览器端工作流执行基础设施",
        "与 @sker/workflow-ui 配合进行可视化编辑",
        "支持前后端工作流协同"
      ],
      "dependencies": [
        "@sker/core",
        "@sker/workflow",
        "@sker/workflow-ast"
      ]
    },
    {
      "name": "@sker/redis",
      "path": "/home/ubuntu/worktrees/demo/sker/packages/redis",
      "description": "Redis客户端包装器，基于ioredis，支持完整的Redis命令、管道操作和依赖注入集成。",
      "mainExports": [
        "RedisClient",
        "RedisPipeline",
        "redisConfigFactory"
      ],
      "keyFeatures": [
        "支持字符串、哈希、有序集合、集合、列表操作",
        "内置管道（Pipeline）支持批量操作",
        "JSON序列化/反序列化",
        "自动从 REDIS_URL 环境变量读取配置"
      ],
      "dependencies": [
        "@sker/core",
        "ioredis"
      ]
    },
    {
      "name": "@sker/mq",
      "path": "/home/ubuntu/worktrees/demo/sker/packages/mq",
      "description": "RabbitMQ消息队列客户端，提供RxJS集成的生产者消费者模式、连接池管理和重试策略。",
      "mainExports": [
        "useQueue",
        "ConnectionPool",
        "QueueManager",
        "QueueProducer",
        "MessageEnvelope",
        "RxConsumerOptions"
      ],
      "keyFeatures": [
        "唯一入口 useQueue Hook - 隐藏复杂度",
        "RxJS双Observable架构：发布流和消费流分离",
        "全局单例连接池，支持自动重连",
        "灵活的消费选项和重试策略"
      ],
      "dependencies": [
        "@sker/core",
        "amqplib",
        "rxjs"
      ]
    },
    {
      "name": "@sker/nlp",
      "path": "/home/ubuntu/worktrees/demo/sker/packages/nlp",
      "description": "LLM客户端库，基于OpenAI API兼容接口，提供NLP分析（情感、关键词、分类）和聊天功能。",
      "mainExports": [
        "NLPAnalyzer",
        "useOpenAi",
        "CompleteAnalysisResult",
        "PostContext"
      ],
      "keyFeatures": [
        "一次调用获取完整分析结果（情感、关键词、分类、标签）",
        "支持OpenAI兼容的LLM服务（DeepSeek等）",
        "上下文感知的智能提示词构建",
        "JSON响应格式自动解析"
      ],
      "dependencies": [
        "@sker/core",
        "openai"
      ]
    },
    {
      "name": "@sker/entities",
      "path": "/home/ubuntu/worktrees/demo/sker/packages/entities",
      "description": "TypeORM数据模型定义，包含微博、事件、工作流等核心业务实体。",
      "mainExports": [
        "WeiboUserEntity",
        "WeiboPostEntity",
        "WeiboCommentEntity",
        "WeiboRepostEntity",
        "EventEntity",
        "WorkflowEntity",
        "WorkflowRunEntity",
        "PostNLPResultEntity",
        "EventCategoryEntity",
        "EventTagEntity",
        "DataSource",
        "EntityManager"
      ],
      "keyFeatures": [
        "完整的微博相关实体（用户、帖子、评论、转发、喜欢）",
        "事件管理实体（事件、分类、标签、统计）",
        "工作流追踪实体（工作流、日程、运行记录）",
        "集成TypeORM的DataSource和EntityManager"
      ],
      "dependencies": [
        "@sker/core",
        "typeorm",
        "reflect-metadata"
      ]
    },
    {
      "name": "@sker/design",
      "path": "/home/ubuntu/worktrees/demo/sker/packages/design",
      "description": "设计系统组件库，提供大屏可视化的基础UI组件（图表、布局、交互）。",
      "mainExports": [
        "Button"
      ],
      "keyFeatures": [
        "基于React 19和现代UI库（Konva、ECharts、react-grid-layout）",
        "支持Canvas画布编辑（Konva）和图表可视化（ECharts）",
        "网格布局支持拖拽和响应式设计",
        "日期时间处理（dayjs）和状态管理（zustand）"
      ],
      "dependencies": [
        "react",
        "react-dom",
        "echarts",
        "echarts-for-react",
        "konva",
        "react-konva",
        "react-grid-layout",
        "zustand",
        "dayjs",
        "lodash-es"
      ]
    },
    {
      "name": "@sker/ui",
      "path": "/home/ubuntu/worktrees/demo/sker/packages/ui",
      "description": "基础UI组件库，提供通用组件（按钮、卡片、代码框）。",
      "mainExports": [
        "Button",
        "Card",
        "Code"
      ],
      "keyFeatures": [
        "轻量级基础组件集",
        "支持样式定制和扩展",
        "作为 @sker/design 的补充"
      ],
      "dependencies": [
        "react",
        "react-dom"
      ]
    },
    {
      "name": "@sker/workflow-ui",
      "path": "/home/ubuntu/worktrees/demo/sker/packages/workflow-ui",
      "description": "工作流可视化编辑器前端库，基于React Flow，提供节点拖拽、连接编辑和属性配置。",
      "mainExports": [
        "WorkflowCanvas",
        "NodePalette",
        "PropertyPanel",
        "BaseNode",
        "DataEdge",
        "ControlEdge",
        "useWorkflow",
        "useWorkflowStore",
        "useSelectionStore",
        "useExecutionStore",
        "astToFlow",
        "flowToAst"
      ],
      "keyFeatures": [
        "完整的工作流编辑器UI组件（画布、节点调色板、属性面板）",
        "基于React Flow的交互式节点图编辑",
        "AST和流图互转适配器",
        "Zustand状态管理（工作流、选择、执行状态）"
      ],
      "dependencies": [
        "@sker/core",
        "@sker/workflow",
        "@xyflow/react",
        "react",
        "react-dom",
        "zustand",
        "framer-motion",
        "tailwindcss",
        "lucide-react"
      ]
    },
    {
      "name": "@sker/agent",
      "path": "/home/ubuntu/worktrees/demo/sker/packages/agent",
      "description": "自主研究与舆情分析Agent，基于LangChain和LangGraph，实现AI驱动的工作流编排。",
      "mainExports": [
        "ResearchAgent",
        "OpinionAgent",
        "tools"
      ],
      "keyFeatures": [
        "LangChain + LangGraph 工作流编排",
        "支持工具调用和多步骤推理",
        "与 @sker/nlp、@sker/workflow-run 集成",
        "支持TypeORM数据持久化"
      ],
      "dependencies": [
        "@sker/core",
        "@sker/entities",
        "@sker/nlp",
        "@sker/workflow-run",
        "@langchain/core",
        "@langchain/langgraph",
        "@langchain/openai",
        "langchain",
        "typeorm"
      ]
    },
    {
      "name": "@sker/typescript-config",
      "path": "/home/ubuntu/worktrees/demo/sker/packages/typescript-config",
      "description": "TypeScript配置和ESLint规则的共享包，统一整个Monorepo的代码规范。",
      "mainExports": [],
      "keyFeatures": [
        "集中管理 tsconfig.json 配置",
        "统一的代码规范和格式化规则",
        "减少重复配置，保证一致性"
      ],
      "dependencies": []
    }
  ],
  "dependencyGraph": {
    "description": "包之间的依赖关系",
    "structure": "DAG (有向无环图)",
    "layers": [
      {
        "layer": "Base",
        "packages": ["@sker/core", "@sker/typescript-config"],
        "description": "基础设施层"
      },
      {
        "layer": "Infrastructure",
        "packages": ["@sker/redis", "@sker/mq", "@sker/nlp", "@sker/entities"],
        "description": "基础服务层"
      },
      {
        "layer": "Workflow Engine",
        "packages": ["@sker/workflow", "@sker/workflow-ast", "@sker/workflow-run"],
        "description": "工作流引擎层"
      },
      {
        "layer": "UI Components",
        "packages": ["@sker/ui", "@sker/design", "@sker/workflow-ui"],
        "description": "UI组件层"
      },
      {
        "layer": "Application",
        "packages": ["@sker/agent", "@sker/workflow-browser"],
        "description": "应用层"
      }
    ]
  },
  "corePatterns": {
    "dependencyInjection": "所有包通过 @sker/core 的DI容器来管理依赖",
    "decoratorPattern": "@Injectable、@Inject、@Node、@Input、@Output等装饰器",
    "visitorPattern": "工作流通过Visitor模式执行AST节点",
    "observablePattern": "消息队列通过RxJS Observable实现生产消费",
    "singletonPattern": "redis连接池、MQ连接池为全局单例",
    "factoryPattern": "Provider使用Factory提供复杂对象创建"
  },
  "recommendedImports": {
    "@sker/core": "import { createInjector, Injectable, Inject } from '@sker/core'",
    "@sker/workflow": "import { execute, Ast, WorkflowGraphAst } from '@sker/workflow'",
    "@sker/workflow-ast": "import { PostNLPAnalyzerAst, EventAutoCreatorAst } from '@sker/workflow-ast'",
    "@sker/workflow-run": "import { PostNLPAnalyzerVisitor, EventAutoCreatorVisitor } from '@sker/workflow-run'",
    "@sker/redis": "import { RedisClient } from '@sker/redis'",
    "@sker/mq": "import { useQueue } from '@sker/mq'",
    "@sker/nlp": "import { NLPAnalyzer, useOpenAi } from '@sker/nlp'",
    "@sker/entities": "import { WeiboPostEntity, EventEntity, WorkflowRunEntity } from '@sker/entities'",
    "@sker/workflow-ui": "import { WorkflowCanvas, useWorkflow, astToFlow } from '@sker/workflow-ui'",
    "@sker/agent": "import { ResearchAgent, OpinionAgent } from '@sker/agent'"
  }
}
